/*
 * 가계부 작성을 위한 테이블을 생성하고 테이터를 추가하세요.
 * 
 * 가계부 테이블은 ID, 입금/출금구분, 금액, 날짜, 지출구분, 비고 정보가 저장될 수 있도록 합니다.
 * 	- ID 는 레코드를 식별하기 위한 식별 값으로 사용합니다. 
 *	- 입금/출금구분은 입금의 경우 'I', 출금의 경우 '0'으로 사용합니다.
 * 	- 지출구분은 식비, 교통비, 물품구입비 등 정해진 항목안에서 사용할 수 있게 합니다. 
 * 	  정해진 항목 안에서 사용할 수 있도록 지출구분 테이블을 별로로 만들어 참조할 수 있게 합니다.
 * 	- 비고에는 지출구분으로 작성할 수 없는 좀 더 상세한 내용을 작성하기 위해 사용합니다. 
 */
CREATE TABLE 가계부 (
		  ID 			NUMBER 			CONSTRAINT 가계부_ID_PK PRIMARY KEY 
		, 입출구분 	CHAR(1)   			CONSTRAINT 가계부_입출구분_CK CHECK(입출구분 IN('I', '0'))
		, 금액 		NUMBER  		 	DEFAULT(0)
		, 날짜 		DATE 				DEFAULT(SYSDATE)
		, 지출구분 	CHAR(5)			CONSTRAINT 가계부_지출구분_FK REFERENCES 지출구분(CODE)
		, 비고 		VARCHAR2(100)
);
/*
* 지출구분 테이블은 CODE, 항목 정보가 저장 될 수 있도록 합니다. 
 * 	- CODE 는 지출항목에 대응할 수 있는 5자리 영문자값으로 사용합니다. 
 * 	- 항목에는 식비, 교통비, 통신비 등 정해진 값을 작성합니다. 
*/
CREATE TABLE 지출구분(
			CODE CHAR(5)		 CONSTRAINT 지출구분_CODE_PK PRIMARY KEY
		,	항목 VARCHAR2(50) CONSTRAINT 지출구분_항목_NN NOT NULL
);

 /* 최근 1년간의(월마다 최소 5개 데이터를 뽑아서 ) 지출내역을 참고하여 데이터를 추가해봅니다.  
 */
INSERT INTO 지출구분 VALUES ('0000A', '급여');
INSERT INTO 지출구분 VALUES ('0000B', '교통비');
INSERT INTO 지출구분 VALUES ('0000C', '통신비');
INSERT INTO 지출구분 VALUES ('0000D', '식비');
INSERT INTO 지출구분 VALUES ('0000E', '물품구입비');

SELECT * FROM 지출구분;
--1월
INSERT INTO 가계부 VALUES(1, 'I', 2500000, TO_DATE('20220115', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(2, '0', 7000, TO_DATE('20220120','YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(3, '0', 75000, TO_DATE('20220120', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(4, '0', 5000, TO_DATE('20220121', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(5, '0', 3000, TO_DATE('20220130', 'YYYYMMDD'), '0000E', NULL);
--2월
INSERT INTO 가계부 VALUES(6, 'I', 2500000, TO_DATE('20220215', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(7, '0', 2400, TO_DATE('20220220', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(8, '0', 75000, TO_DATE('20220221', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(9, '0', 3000, TO_DATE('20220222', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(10, '0', 30000, TO_DATE('20220225', 'YYYYMMDD'), '0000D', NULL);
-- 3월
INSERT INTO 가계부 VALUES(11, 'I', 2500000, TO_DATE('20220315', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(12, '0', 10000, TO_DATE('20220320', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(13, '0', 75000, TO_DATE('20220321', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(14, '0', 14000, TO_DATE('20220321', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(15, '0', 3000, TO_DATE('20220330', 'YYYYMMDD'), '0000D', NULL);
--4월
INSERT INTO 가계부 VALUES(16, 'I', 2500000, TO_DATE('20220415', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(17, '0', 2400, TO_DATE('20220420', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(18, '0', 75000, TO_DATE('20220421', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(19, '0', 30000, TO_DATE('20220425', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(20, '0', 4500, TO_DATE('20220429', 'YYYYMMDD'), '0000E', NULL);
--5월
INSERT INTO 가계부 VALUES(21, '0', 7500, TO_DATE('20220501', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(22, '0', 14500, TO_DATE('20220505', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(23, 'I', 2500000, TO_DATE('20220515', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(24, '0', 2400, TO_DATE('20220520', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(25, '0', 75000, TO_DATE('20220521', 'YYYYMMDD'), '0000C', NULL);

--6월
INSERT INTO 가계부 VALUES(26, '0', 17500, TO_DATE('20220610', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(27, 'I', 2500000, TO_DATE('20220615', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(28, '0', 45000, TO_DATE('20220620', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(29, '0', 75000, TO_DATE('20220621', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(30, '0', 10000, TO_DATE('20220626', 'YYYYMMDD'), '0000E', NULL);

-- 7월 
INSERT INTO 가계부 VALUES(31, 'I', 2500000, TO_DATE('20220715', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(32, '0', 20500, TO_DATE('20220716', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(33, '0', 55000, TO_DATE('20220720', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(34, '0', 75000, TO_DATE('20220721', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(35, '0', 4500, TO_DATE('20220722', 'YYYYMMDD'), '0000D', NULL);

-- 8월 
INSERT INTO 가계부 VALUES(36, 'I', 2500000, TO_DATE('20220815', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(37, '0', 65000, TO_DATE('20220820', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(38, '0', 75000, TO_DATE('20220821', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(39, '0', 32000, TO_DATE('20220824', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(40, '0', 18500, TO_DATE('20220830', 'YYYYMMDD'), '0000E', NULL);

-- 9월
INSERT INTO 가계부 VALUES(41, 'I', 2500000, TO_DATE('20220915', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(42, '0', 45000, TO_DATE('20220920', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(43, '0', 75000, TO_DATE('20220921', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(44, '0', 5000, TO_DATE('20220925', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(45, '0', 18000, TO_DATE('20220928', 'YYYYMMDD'), '0000D', NULL);

-- 10월
INSERT INTO 가계부 VALUES(46, 'I', 2500000, TO_DATE('20221015', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(47, '0', 30000, TO_DATE('202201020', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(48, '0', 75000, TO_DATE('20221021', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(49, '0', 12000, TO_DATE('20221024', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(50, '0', 4000, TO_DATE('20221029', 'YYYYMMDD'), '0000D', NULL);

-- 11월
INSERT INTO 가계부 VALUES(27, 'I', 2500000, TO_DATE('20220615', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(28, '0', 45000, TO_DATE('20220620', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(29, '0', 75000, TO_DATE('20220621', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(35, '0', 4500, TO_DATE('20220722', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(20, '0', 4500, TO_DATE('20220429', 'YYYYMMDD'), '0000E', NULL);

-- 12월
INSERT INTO 가계부 VALUES(27, 'I', 2500000, TO_DATE('20220615', 'YYYYMMDD'), '0000A', NULL);
INSERT INTO 가계부 VALUES(28, '0', 45000, TO_DATE('20220620', 'YYYYMMDD'), '0000B', NULL);
INSERT INTO 가계부 VALUES(29, '0', 75000, TO_DATE('20220621', 'YYYYMMDD'), '0000C', NULL);
INSERT INTO 가계부 VALUES(35, '0', 4500, TO_DATE('20220722', 'YYYYMMDD'), '0000D', NULL);
INSERT INTO 가계부 VALUES(20, '0', 4500, TO_DATE('20220429', 'YYYYMMDD'), '0000E', NULL);


SELECT * FROM 가계부;
/*
 * 모든 데이터를 추가 후에는 다음의 작업을 추가로 진행 합니다. 
 * 	1. 월별 지출액 합계 구하기.
 * 	2. 월별 지출항목별 합계를 구하세요. 
 * 	3. 고정지출비 테이블을 별도로 생성하여 식비, 교통비, 통신비에 해당하는 항목들만 따로 저장하기.
 * 	4. 통신비로 추가한 항목을 세분화하여 통신비(기기값) 항목을 새로 추가하고 모든 통신비에 통신비(기기값)에 
 * 		해당하는 비용을 따로 추가하도록 합니다. (기존 통신비에는 통신비(기기값)에 해당하는 금액을 제합니다.)
 * 		정해진 기기값이 없으면 통신비의 40% 가 기기값인 것으로 하세요. 
*/

